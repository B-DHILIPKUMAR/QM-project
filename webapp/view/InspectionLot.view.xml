<mvc:View
    controllerName="quality.quality.controller.InspectionLot"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:fb="sap.ui.comp.filterbar"
    xmlns:core="sap.ui.core">
    <Page id="inspectionLotPage" title="Inspection Lots" showNavButton="true" navButtonPress="onNavBack">
        <content>
            <fb:FilterBar id="filterbar" persistencyKey="PKeyLot" useToolbar="false" search=".onSearch">
                <fb:filterGroupItems>
                    <fb:FilterGroupItem name="Plant" label="Plant" groupName="Group1" visibleInFilterBar="true">
                        <fb:control>
                            <Input id="filterPlant" placeholder="Enter Plant" />
                        </fb:control>
                    </fb:FilterGroupItem>
                    <fb:FilterGroupItem name="LotNumber" label="Inspection Lot" groupName="Group1" visibleInFilterBar="true">
                        <fb:control>
                            <Input id="filterLot" placeholder="Enter Lot Number" />
                        </fb:control>
                    </fb:FilterGroupItem>
                </fb:filterGroupItems>
            </fb:FilterBar>

            <Table id="inspectionLotTable" items="{/ZQM_INSPECTIONSet}" sticky="HeaderToolbar,ColumnHeaders">
                <headerToolbar>
                    <OverflowToolbar>
                        <Title text="Lots" level="H2" />
                    </OverflowToolbar>
                </headerToolbar>
                <columns>
                    <Column>
                        <Text text="Lot Number" />
                    </Column>
                    <Column minScreenWidth="Tablet" demandPopin="true">
                        <Text text="Material" />
                    </Column>
                    <Column minScreenWidth="Desktop" demandPopin="true">
                        <Text text="Plant" />
                    </Column>
                    <Column minScreenWidth="Desktop" demandPopin="true">
                        <Text text="Type" />
                    </Column>
                    <Column>
                        <Text text="Quantity" />
                    </Column>
                    <Column minScreenWidth="Desktop" demandPopin="true">
                        <Text text="Date" />
                    </Column>
                    <Column minScreenWidth="Desktop" demandPopin="true">
                        <Text text="UD Status" />
                    </Column>
                    <Column hAlign="End">
                        <Text text="Actions" />
                    </Column>
                </columns>
                <items>
                    <ColumnListItem type="Inactive">
                        <cells>
                            <Text text="{Prueflos}" />
                            <Text text="{MaterialNumber}" />
                            <Text text="{Plant}" />
                            <Text text="{InspectionType}" />
                            <Text text="{LotQuantity} {Uom}" />
                            <Text text="{path: 'CreatedDate', type: 'sap.ui.model.type.Date', formatOptions: { pattern: 'dd.MM.yyyy' }}" />
                            <ObjectStatus 
                                text="{= ${UsageDecisionCode} ? (${UsageDecisionCode} === 'A' ? 'Approved' : 'Rejected') : 'Not Decided' }"
                                state="{= ${UsageDecisionCode} ? (${UsageDecisionCode} === 'A' ? 'Success' : 'Error') : 'Warning' }" />
                            <HBox justifyContent="End">
                                <Button icon="sap-icon://create-entry-time" tooltip="Record Results" press="onRecordResults" class="sapUiTinyMarginEnd" />
                                <Button icon="sap-icon://decision" tooltip="Usage Decision" press="onUsageDecision" />
                            </HBox>
                        </cells>
                    </ColumnListItem>
                </items>
            </Table>
        </content>
    </Page>
</mvc:View>

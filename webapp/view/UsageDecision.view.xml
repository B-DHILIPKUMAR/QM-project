<mvc:View
    controllerName="quality.quality.controller.UsageDecision"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:f="sap.ui.layout.form"
    xmlns:core="sap.ui.core">
    <Page title="Usage Decision: {/Prueflos}" showNavButton="true" navButtonPress="onNavBack">
        <content>
            <ObjectHeader
                title="Inspection Lot: {/Prueflos}"
                number="{/total_qty}"
                numberUnit="{/uom}">
                <attributes>
                    <ObjectAttribute title="Material" text="{/Matnr}" />
                    <ObjectAttribute title="Plant" text="{/Werks}" />
                    <ObjectAttribute title="Inspected Qty" text="{/inspected_qty}" />
                </attributes>
            </ObjectHeader>

            <f:SimpleForm editable="true" layout="ResponsiveGridLayout" title="Make Usage Decision">
                <f:content>
                    <Label text="Decision" required="true" />
                    <Select id="decisionSelect" selectedKey="{/UdCode}">
                        <core:Item key="A" text="Approve" />
                        <core:Item key="R" text="Reject" />
                    </Select>
                    
                    <Label text="Decision Remarks" />
                    <TextArea value="{/UdRemarks}" rows="3" />
                </f:content>
            </f:SimpleForm>

            <VBox class="sapUiSmallMargin" visible="{= ${/inspected_qty} !== ${/total_qty} }">
                <MessageStrip
                    text="Wait: Usage decision can only be made if Total Inspected Quantity ({/inspected_qty}) equals the Inspection Lot Quantity ({/total_qty})."
                    type="Error"
                    showIcon="true" />
            </VBox>
        </content>
        <footer>
            <OverflowToolbar>
                <ToolbarSpacer />
                <Button text="Save Decision" type="Emphasized" press="onSaveDecision" enabled="{= ${/inspected_qty} === ${/total_qty} }" />
                <Button text="Cancel" press="onNavBack" />
            </OverflowToolbar>
        </footer>
    </Page>
</mvc:View>
